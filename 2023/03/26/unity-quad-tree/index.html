<!DOCTYPE html>
<html>
    <head>
        <title>Unity å››å‰æ ‘ | é™ˆå·§å€©</title>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1">









<link rel="stylesheet" href="/lib/icofont/icofont.min.css" />
<link rel="stylesheet" href="/css/syntax.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

    </head>

    <body>
        <header class="header-wrapper">
    <div class="header">
        <a class="site-title" href="https://www.chenqiaoqian.com/">é™ˆå·§å€©</a>

        <ul class="menu">
            
        </ul>
    </div>
</header>

        <main class="main-wrapper">
            <div class="main">
                

<section class="single">
    <h1 class="title">Unity å››å‰æ ‘</h1>

    <div class="tip">
        <time datetime="2023-03-26 11:13:34 &#43;0800 CST">2023/03/26</time>
        <span class="split">Â·</span>
        <span> 126 words </span>
        <span class="split">Â·</span>
        <span>
            1 minutes to read
        </span>
    </div>

    <div class="taxonomies">
        
        <div>
            Categories:
            
                <a href="/categories/unity">Unity</a>
            
        </div>
        

        
            <div>
                Tags:
                
                    <a href="/tags/quadtree">QuadTree</a>
                
            </div>
        
    </div>

    <hr />

    <div class="content">
        <p>å››å‰æ ‘æ˜¯ä¸€ç§æ ‘çŠ¶æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½æœ‰å››ä¸ªå­åŒºå—ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆæ¯ä¸ªå­èŠ‚ç‚¹åˆ†ä¸ºå››ä¸ªè±¡é™ï¼Œå¯ä»¥æ˜¯çŸ©å½¢æˆ–è€…ä»»æ„å›¾å½¢ã€‚å¸¸ç”¨æ¥è¡¨ç¤ºç©ºé—´ç´¢å¼•æˆ–è€…äºŒä½ç©ºé—´ç¢°æ’æ£€æµ‹ç­‰ç­‰ã€‚</p>
<h2 id="å››å‰æ ‘ç‰¹ç‚¹">å››å‰æ ‘ç‰¹ç‚¹ <a href="#%e5%9b%9b%e5%8f%89%e6%a0%91%e7%89%b9%e7%82%b9" class="anchor">ğŸ”—</a></h2><ol>
<li>å¯ä»¥åˆ†è§£æˆå„è‡ªçš„åŒºå—ã€‚</li>
<li>æ¯ä¸ªåŒºå—éƒ½æœ‰è‡ªå·±å­˜å‚¨çš„æ•°é‡ä¸Šé™ï¼Œå½“èŠ‚ç‚¹è¾¾åˆ°ä¸Šé™åˆ™ä¼šèŠ‚ç‚¹åˆ†è£‚ã€‚</li>
<li>æ¯ä¸ªåŒºå—çš„å­æ ‘ç›¸å½“äºç‹¬ç«‹çš„å››å‰æ ‘ã€‚</li>
</ol>
<h2 id="å®ä¾‹">å®ä¾‹ <a href="#%e5%ae%9e%e4%be%8b" class="anchor">ğŸ”—</a></h2><p>éœ€æ±‚ï¼šå°†æ‘„åƒæœºèŒƒå›´çš„åœºæ™¯ç‰©ä½“è¿›è¡Œéšè—è£å‰ªï¼Œåªæ˜¾ç¤ºæ‘„åƒæœºèŒƒå›´çš„åœºæ™¯ç‰©ä½“ã€‚
å¼€å‘ç¯å¢ƒ:</p>
<ul>
<li>å¼•æ“ï¼šUnity</li>
<li>è¯­è¨€ï¼šC#</li>
<li>æ‘„åƒæœºï¼šæ­£äº¤æ‘„åƒæœº
å®ç°ï¼šåŸºäºä¸Šè¿°ç†è§£ï¼Œæˆ‘æ„å»ºäº†ä¸€ä¸ªå››å‰æ ‘ï¼Œåªæ˜¯ç°å®äº†5ä¸ªæ–¹æ³•ï¼Œä¸Šè¿°åŠŸèƒ½ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">//å½“å‰æ ‘çš„ä½ç½®å’Œå¤§å°</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> Rect _treeRect;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//å­å››å‰æ ‘æœ€å¤§æ•°é‡ä¸º4</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> List&lt;QuadTree&gt; _childTrees;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//å½“å‰å››å‰æ ‘æ’å…¥çš„Objectçš„æ•°é‡</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> List&lt;ObjRect&gt; _objects;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//å½“å‰å››å‰æ ‘æ·±åº¦</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">int</span> _depth;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//æœ€å¤§æ·±åº¦(å¸¸é‡)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">int</span> _maxDepth;
</span></span><span style="display:flex;"><span><span style="color:#75715e">//å››å‰æ ‘å½“å‰èŠ‚ç‚¹å…è®¸å­˜å‚¨çš„æœ€å¤§Objectæ•°é‡</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">int</span> _maxRectObjectCount;
</span></span></code></pre></div><h3 id="å››å‰æ ‘æ„å»º">å››å‰æ ‘æ„å»º <a href="#%e5%9b%9b%e5%8f%89%e6%a0%91%e6%9e%84%e5%bb%ba" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** Rectä¸ºæ ¹Rectå¯ä»¥ç†è§£ä¸ºæ•´ä¸ªå››å‰æ ‘çš„æœ€å¤§çŸ©å½¢(xã€yã€widthã€heigh)ï¼Œéœ€è¦æ³¨æ„recté”šç‚¹ä½ç½®ï¼Œéœ€è¦å®ç°Overlapsã€Containsæ–¹æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** depthä¸ºå½“å‰å››å‰æ ‘æ·±åº¦ï¼Œé»˜è®¤ä¸º0ï¼Œæ¯æ¯åˆ†è£‚ä¸€æ¬¡++ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** æ³¨æ„:éœ€è¦é»˜è®¤è®¾ç½®æœ€å¤§depthå’Œå½“å‰èŠ‚ç‚¹åŒºåŸŸæœ€å¤§æ•°é‡ä¸Šé™
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">**/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> QuadTree(Rect rect,<span style="color:#66d9ef">int</span> depth)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ......
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å››å‰æ ‘åˆ†è£‚">å››å‰æ ‘åˆ†è£‚ <a href="#%e5%9b%9b%e5%8f%89%e6%a0%91%e5%88%86%e8%a3%82" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** å°†å½“å‰åŒºå—èŠ‚ç‚¹åˆ†è£‚æˆ4ä¸ªå­æ ‘ï¼Œåˆ†åˆ«ä¸ºå½“å‰Rectçš„å³ä¸Šã€å³ä¸‹ã€å·¦ä¸Šå’Œå·¦ä¸‹å››ä¸ªåŒºåŸŸã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** åŒæ—¶æ·±åº¦++
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">**/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> Split()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ......
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å››å‰æ ‘è·å–è±¡é™">å››å‰æ ‘è·å–è±¡é™ <a href="#%e5%9b%9b%e5%8f%89%e6%a0%91%e8%8e%b7%e5%8f%96%e8%b1%a1%e9%99%90" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** æ ¹æ®ä¼ å…¥ObjRectçš„Rectè·å–åœ¨å½“å‰å››å‰æ ‘çš„é‚£äº›è±¡é™
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** ä½¿ç”¨æ•°ç»„æ˜¯å› ä¸ºä¸€ä¸ªè¶³å¤Ÿå¤§çš„ObjRectå¯èƒ½ä¼šåŒæ—¶å­˜åœ¨å¤šä¸ªè±¡é™ï¼Œæ‰€ä»¥å¯¹æ¯ä¸ªè±¡é™éƒ½è¦è¿›å…¥æ’å…¥ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** è¿”å›å€¼ä¸ºè±¡é™ç´¢å¼•æ•°ç»„ï¼Œæå‰è§„åˆ’å¥½å³ä¸Šã€å³ä¸‹ã€å·¦ä¸Šå’Œå·¦ä¸‹å››ä¸ªå­èŠ‚ç‚¹åŒºåŸŸçš„ç´¢å¼•ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">**/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">private</span> List&lt;<span style="color:#66d9ef">int</span>&gt; GetSpaceIndex(ObjRect rect)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ......
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å››å‰æ ‘æ’å…¥">å››å‰æ ‘æ’å…¥ <a href="#%e5%9b%9b%e5%8f%89%e6%a0%91%e6%8f%92%e5%85%a5" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** æ’å…¥è§„åˆ™:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** 1ã€è¯¥åŒºåŸŸèŠ‚ç‚¹å·²ç»åˆ†è£‚(å­˜åœ¨å­å››å‰æ ‘æ•°ç»„)ï¼Œç›´æ¥è°ƒç”¨GetSpaceIndexè¿”å›å¯¹åº”è±¡é™ç´¢å¼•ï¼Œç›´æ¥æ’å…¥å³å¯ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** 2ã€è¯¥åŒºåŸŸèŠ‚ç‚¹æœªåˆ†è£‚ï¼Œç›´æ¥æ’å…¥åˆ°åŒºåŸŸå¯¹è±¡æ•°ç»„é‡Œï¼Œå½“æ•°ç»„è¾¾åˆ°ä¸Šé™åï¼Œæ‰§è¡ŒSplitåˆ†è£‚ï¼Œåˆ†è£‚åï¼Œè®²æ•°ç»„çš„å¯¹è±¡ï¼Œä¾æ¬¡è°ƒç”¨**GetSpaceIndexè·å–è±¡é™ç´¢å¼•ï¼Œç›´æ¥æ’å…¥å³å¯ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** æ³¨æ„:æ’å…¥ä¸ºä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œæ ¹æ®depthä¾æ¬¡æ’å…¥ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">**/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> Insert(ObjRect rect)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ......
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å››å‰æ ‘éå†æ£€æµ‹é‡å çš„å¯¹è±¡">å››å‰æ ‘éå†æ£€æµ‹é‡å çš„å¯¹è±¡ <a href="#%e5%9b%9b%e5%8f%89%e6%a0%91%e9%81%8d%e5%8e%86%e6%a3%80%e6%b5%8b%e9%87%8d%e5%8f%a0%e7%9a%84%e5%af%b9%e8%b1%a1" class="anchor">ğŸ”—</a></h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** 1ã€é€šè¿‡GetSpaceIndexè·å–è±¡é™ç´¢å¼•æ•°ç»„
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** 2ã€éå†è±¡é™ç´¢å¼•æ•°ç»„ï¼Œåˆ†åˆ«è°ƒç”¨è±¡é™å­æ ‘çš„Retrieveè¿›è¡Œé€’å½’
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">** 3ã€éå†è±¡é™å­æ ‘Retrieveè¿”å›çš„List&lt;ObjRect&gt;ï¼Œè¿›è¡ŒOverlapsåˆ¤æ–­æ˜¯å¦é‡å ï¼Œå¯¹é‡å çš„å¯¹è±¡è¿›è¡Œä¿å­˜å¹¶ä¸”è¿”å›ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">**/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> List&lt;ObjRect&gt; Retrieve(ObjRect rect)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    ......
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="å››å‰æ ‘æœ€ç»ˆå®ç°æ•ˆæœ">å››å‰æ ‘æœ€ç»ˆå®ç°æ•ˆæœ <a href="#%e5%9b%9b%e5%8f%89%e6%a0%91%e6%9c%80%e7%bb%88%e5%ae%9e%e7%8e%b0%e6%95%88%e6%9e%9c" class="anchor">ğŸ”—</a></h2><p><img src="/2023-03-26-unity-quad-tree/unity-quad-tree-animation.gif" alt="unity-quad-tree-animation"></p>
<h2 id="ç»“è®º">ç»“è®º <a href="#%e7%bb%93%e8%ae%ba" class="anchor">ğŸ”—</a></h2><p>æ¬ç –æ„‰å¿«ï¼</p>
    </div>

    
</section>


            </div>
            <div class="side">
                
                    <div class="side-recent">
    <h2 class="side-title">
        <a href="/post/">Recent Post</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/2023/10/31/2023-10-31-unity-document-99/">Unityä¸­æ–‡ç‰ˆ-Create Gameplay Editor Features-Project Settings-UI Toolkit project settings(è‡ªç¿»è¯‘)</a>
            </li>
        
            <li>
                <a href="/2023/10/30/2023-10-30-unity-document-98/">Unityä¸­æ–‡ç‰ˆ-Create Gameplay Editor Features-Project Settings-Time(è‡ªç¿»è¯‘)</a>
            </li>
        
            <li>
                <a href="/2023/10/29/2023-10-29-unity-document-97/">Unityä¸­æ–‡ç‰ˆ-Create Gameplay Editor Features-Project Settings-Tags and Layers(è‡ªç¿»è¯‘)</a>
            </li>
        
            <li>
                <a href="/2023/10/28/2023-10-28-unity-document-96/">Unityä¸­æ–‡ç‰ˆ-Create Gameplay Editor Features-Project Settings-Script Execution Order settings(è‡ªç¿»è¯‘)</a>
            </li>
        
            <li>
                <a href="/2023/10/27/2023-10-27-unity-document-95/">Unityä¸­æ–‡ç‰ˆ-Create Gameplay Editor Features-Project Settings-Quality(è‡ªç¿»è¯‘)</a>
            </li>
        
    </ul>
</div>

                
                <div class="side-categories">
    <h2>Categories</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/categories/artificial-intelligence">artificial intelligence(2)</a>
            </li>
        
            <li>
                <a href="/categories/csharp">csharp(24)</a>
            </li>
        
            <li>
                <a href="/categories/unity">unity(111)</a>
            </li>
        
    </ul>
</div>

                <div class="side-tags">
    <h2>Tags</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/tags/buildin-render-pipeline">buildin render pipeline (3)</a>
            </li>
        
            <li>
                <a href="/tags/debugger">debugger (1)</a>
            </li>
        
            <li>
                <a href="/tags/design-pattern">design pattern (24)</a>
            </li>
        
            <li>
                <a href="/tags/document">document (104)</a>
            </li>
        
            <li>
                <a href="/tags/dots">dots (1)</a>
            </li>
        
            <li>
                <a href="/tags/mathematics">mathematics (1)</a>
            </li>
        
            <li>
                <a href="/tags/notifications">notifications (1)</a>
            </li>
        
            <li>
                <a href="/tags/quadtree">quadtree (1)</a>
            </li>
        
            <li>
                <a href="/tags/texturepacker">texturepacker (1)</a>
            </li>
        
    </ul>
</div>

            </div>
        </main>
        <footer class="footer">
    <div class="footer-row">
        
            
            
                <a class="footer-item" href="https://www.chenqiaoqian.com/post/index.xml">
                    Feed of Post
                    <i class="icofont-rss"></i>
                </a>
            
        

        
            
            
        
    </div>

    
</footer>

    </body>
</html>
