<!DOCTYPE html>
<html>
    <head>
        <title>è®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼ | é™ˆå·§å€©</title>
        <meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1">









<link rel="stylesheet" href="/lib/icofont/icofont.min.css" />
<link rel="stylesheet" href="/css/syntax.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

    </head>

    <body>
        <header class="header-wrapper">
    <div class="header">
        <a class="site-title" href="https://www.chenqiaoqian.com/">é™ˆå·§å€©</a>

        <ul class="menu">
            
        </ul>
    </div>
</header>

        <main class="main-wrapper">
            <div class="main">
                

<section class="single">
    <h1 class="title">è®¾è®¡æ¨¡å¼-å•ä¾‹æ¨¡å¼</h1>

    <div class="tip">
        <time datetime="2023-04-19 11:13:34 &#43;0800 CST">2023/04/19</time>
        <span class="split">Â·</span>
        <span> 254 words </span>
        <span class="split">Â·</span>
        <span>
            2 minutes to read
        </span>
    </div>

    <div class="taxonomies">
        
        <div>
            Categories:
            
                <a href="/categories/csharp">CSharp</a>
            
        </div>
        

        
            <div>
                Tags:
                
                    <a href="/tags/design-pattern">Design Pattern</a>
                
            </div>
        
    </div>

    <hr />

    <div class="content">
        <p>Singletonå•ä¾‹æ¨¡å¼å±äºåˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®ç‚¹ã€‚</p>
<h2 id="design-patternsingleton">Design Pattern:Singleton <a href="#design-patternsingleton" class="anchor">ğŸ”—</a></h2><h3 id="åŸºæœ¬ä»‹ç»">åŸºæœ¬ä»‹ç» <a href="#%e5%9f%ba%e6%9c%ac%e4%bb%8b%e7%bb%8d" class="anchor">ğŸ”—</a></h3><h4 id="æ„æˆ">æ„æˆ <a href="#%e6%9e%84%e6%88%90" class="anchor">ğŸ”—</a></h4><ul>
<li>å¯†å°ç±»</li>
<li>ç§æœ‰å’Œæ— å‚çš„å•ä¸€æ„é€ å‡½æ•°</li>
<li>è·å–å®ä¾‹å¼•ç”¨çš„é™æ€å’Œå¼€æ”¾æ–¹æ³•</li>
</ul>
<h4 id="ä¼˜ç‚¹">ä¼˜ç‚¹ <a href="#%e4%bc%98%e7%82%b9" class="anchor">ğŸ”—</a></h4><ul>
<li>å•ä¾‹æ¨¡å¼å¯ä»¥å®ç°æ¥å£</li>
<li>å¯ä»¥å®ç°å»¶è¿ŸåŠ è½½å¹¶ä¸”å¯ä»¥ä½¿ç”¨é™æ€åˆå§‹åŒ–</li>
<li>è§„èŒƒä¾èµ–å…³ç³»</li>
<li>å•ç‚¹è®¿é—®ï¼Œæ˜“äºç»´æŠ¤</li>
</ul>
<h4 id="ç¼ºç‚¹">ç¼ºç‚¹ <a href="#%e7%bc%ba%e7%82%b9" class="anchor">ğŸ”—</a></h4><ul>
<li>ä¸èƒ½ç»§æ‰¿ï¼Œä¸å•ä¸€èŒè´£åŸåˆ™å†²çª</li>
<li>é™ä½äº†å¹¶è¡Œæ‰§è¡Œçš„å¯èƒ½æ€§</li>
</ul>
<h3 id="å®ç°">å®ç° <a href="#%e5%ae%9e%e7%8e%b0" class="anchor">ğŸ”—</a></h3><p>C#ä¸­æœ‰å¤šç§å®ç°å•ä¾‹è®¾è®¡æ¨¡å¼çš„æ–¹æ³•</p>
<h4 id="æ— çº¿ç¨‹å®‰å…¨çš„å•ä¾‹">æ— çº¿ç¨‹å®‰å…¨çš„å•ä¾‹ <a href="#%e6%97%a0%e7%ba%bf%e7%a8%8b%e5%ae%89%e5%85%a8%e7%9a%84%e5%8d%95%e4%be%8b" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Singleton</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Singleton _instance = <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Singleton()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Singleton Instance
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (_instance == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                _instance = <span style="color:#66d9ef">new</span> Singleton();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> _instance;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è§£é‡Š</p>
<ul>
<li>å¤šçº¿ç¨‹æƒ…å†µä¸‹ä¸å®‰å…¨ï¼Œå¤šçº¿ç¨‹ä¸­ä¼šè§¦å‘å¤šæ¬¡if (instance == null)ä¸ºçœŸï¼Œæ„é€ å¤šä»½å®ä¾‹ï¼Œè¿èƒŒå•ä¸€æ„é€ åŸåˆ™ã€‚</li>
</ul>
<h4 id="ä½¿ç”¨é”çš„çº¿ç¨‹å®‰å…¨å•ä¾‹">ä½¿ç”¨é”çš„çº¿ç¨‹å®‰å…¨å•ä¾‹ <a href="#%e4%bd%bf%e7%94%a8%e9%94%81%e7%9a%84%e7%ba%bf%e7%a8%8b%e5%ae%89%e5%85%a8%e5%8d%95%e4%be%8b" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Singleton</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Singleton _instance = <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">object</span> _lock = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">object</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Singleton()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Singleton Instance
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">lock</span> (_lock)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> (_instance == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    _instance = <span style="color:#66d9ef">new</span> Singleton();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">return</span> _instance;
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è§£é‡Š</p>
<ul>
<li>çº¿ç¨‹å®‰å…¨ï¼Œä½¿ç”¨é”æ¥ç¡®ä¿åªåˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚</li>
<li>æ€§èƒ½å—å½±å“ï¼Œæ¯æ¬¡è¯·æ±‚å®ä¾‹éƒ½éœ€è¦è·å–é”ã€‚</li>
</ul>
<h4 id="ä½¿ç”¨åŒé‡æ£€æŸ¥é”å®šå®ç°çº¿ç¨‹å®‰å…¨å•ä¾‹">ä½¿ç”¨åŒé‡æ£€æŸ¥é”å®šå®ç°çº¿ç¨‹å®‰å…¨å•ä¾‹ <a href="#%e4%bd%bf%e7%94%a8%e5%8f%8c%e9%87%8d%e6%a3%80%e6%9f%a5%e9%94%81%e5%ae%9a%e5%ae%9e%e7%8e%b0%e7%ba%bf%e7%a8%8b%e5%ae%89%e5%85%a8%e5%8d%95%e4%be%8b" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Singleton</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> Singleton _instance = <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> <span style="color:#66d9ef">object</span> _lock = <span style="color:#66d9ef">new</span> <span style="color:#66d9ef">object</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Singleton()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Singleton Instance
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> (_instance == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">lock</span> (_lock)
</span></span><span style="display:flex;"><span>                {
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span> (_instance == <span style="color:#66d9ef">null</span>)
</span></span><span style="display:flex;"><span>                    {
</span></span><span style="display:flex;"><span>                        _instance = <span style="color:#66d9ef">new</span> Singleton();
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> _instance;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è§£é‡Š</p>
<ul>
<li>ä¾ç„¶å­˜åœ¨æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
<h4 id="æ— é”çº¿ç¨‹å®‰å…¨å‡½æ•°å•ä¾‹">æ— é”çº¿ç¨‹å®‰å…¨å‡½æ•°å•ä¾‹ <a href="#%e6%97%a0%e9%94%81%e7%ba%bf%e7%a8%8b%e5%ae%89%e5%85%a8%e5%87%bd%e6%95%b0%e5%8d%95%e4%be%8b" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Singleton</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> Singleton _instance = <span style="color:#66d9ef">new</span> Singleton();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">static</span> Singleton()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Singleton()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Singleton Instance
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">get</span>
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> _instance;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è§£é‡Š</p>
<ul>
<li>é™æ€æ„é€ å‡½æ•°ç”¨äºåˆå§‹åŒ–ä»»ä½•é™æ€æ•°æ®ï¼Œæˆ–æ‰§è¡Œä»…éœ€æ‰§è¡Œä¸€æ¬¡çš„ç‰¹å®šæ“ä½œã€‚ å°†åœ¨åˆ›å»ºç¬¬ä¸€ä¸ªå®ä¾‹æˆ–å¼•ç”¨ä»»ä½•é™æ€æˆå‘˜ä¹‹å‰è‡ªåŠ¨è°ƒç”¨é™æ€æ„é€ å‡½æ•°ã€‚ é™æ€æ„é€ å‡½æ•°æœ€å¤šè°ƒç”¨ä¸€æ¬¡ã€‚å½“ç±»å‹æœ‰BeforeFieldInitæ ‡å¿—æ—¶æŒ‡å®šè°ƒç”¨æ­¤ç±»å‹çš„é™æ€æ–¹æ³•å¹¶ä¸å¼ºåˆ¶ç³»ç»Ÿåˆå§‹åŒ–æ­¤ç±»å‹ã€‚</li>
<li>å®ä¾‹åˆ›å»ºï¼Œéœ€è¦å¯¹å®ä¾‹ä»¥å¤–çš„é™æ€æˆå‘˜çš„å¼•ç”¨ã€‚</li>
</ul>
<h4 id="lazyt-æ³›å‹ç±»åœ¨å•ä¾‹">Lazy<!-- raw HTML omitted --> æ³›å‹ç±»åœ¨å•ä¾‹ <a href="#lazyt-%e6%b3%9b%e5%9e%8b%e7%b1%bb%e5%9c%a8%e5%8d%95%e4%be%8b" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c#" data-lang="c#"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Singleton</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">readonly</span> Lazy&lt;Singleton&gt; _instance = <span style="color:#66d9ef">new</span> Lazy&lt;Singleton&gt;(() =&gt; <span style="color:#66d9ef">new</span> Singleton());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> Singleton Instance { <span style="color:#66d9ef">get</span> { <span style="color:#66d9ef">return</span> _instance.Value; } }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> Singleton()
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è§£é‡Š</p>
<ul>
<li>.NET 4æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</li>
<li>Lazy<!-- raw HTML omitted --> ç±»æä¾›ä»å¤šä¸ªçº¿ç¨‹è¿›è¡Œè®¿é—®çš„å»¶è¿Ÿåˆå§‹åŒ–ã€‚</li>
</ul>
<h3 id="ç»“è®º">ç»“è®º <a href="#%e7%bb%93%e8%ae%ba" class="anchor">ğŸ”—</a></h3><p>æ¬ç –æ„‰å¿«ï¼</p>
    </div>

    
</section>


            </div>
            <div class="side">
                
                    <div class="side-recent">
    <h2 class="side-title">
        <a href="/post/">Recent Post</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/2023/07/13/2023-07-13-unity-Documents-1/">Unityä¸­æ–‡ç‰ˆ-Unity2023.2æ›´æ–°æ—¥å¿—(è‡ªç¿»è¯‘)</a>
            </li>
        
            <li>
                <a href="/2023/07/09/2023-07-09-unity-ugui/">UGUIä¸­æ–‡æ•™ç¨‹(è‡ªç¿»è¯‘)</a>
            </li>
        
            <li>
                <a href="/2023/07/03/2023-07-05-unity-mathematics-1/">æ¸¸æˆæ•°å­¦åŸºç¡€</a>
            </li>
        
            <li>
                <a href="/2023/07/03/buildin-renderpipeline-base/">Unityå†…ç½®æ¸²æŸ“ç®¡çº¿-åŸºç¡€è¯­æ³•</a>
            </li>
        
            <li>
                <a href="/2023/07/03/2023-07-05-unity-framedebugger/">Frame Debugger</a>
            </li>
        
    </ul>
</div>

                
                <div class="side-categories">
    <h2>Categories</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/categories/csharp">csharp(24)</a>
            </li>
        
            <li>
                <a href="/categories/unity">unity(11)</a>
            </li>
        
    </ul>
</div>

                <div class="side-tags">
    <h2>Tags</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/tags/buildin-render-pipeline">buildin-render-pipeline (3)</a>
            </li>
        
            <li>
                <a href="/tags/debugger">debugger (1)</a>
            </li>
        
            <li>
                <a href="/tags/design-pattern">design-pattern (24)</a>
            </li>
        
            <li>
                <a href="/tags/document">document (2)</a>
            </li>
        
            <li>
                <a href="/tags/dots">dots (1)</a>
            </li>
        
            <li>
                <a href="/tags/mathematics">mathematics (1)</a>
            </li>
        
            <li>
                <a href="/tags/notifications">notifications (1)</a>
            </li>
        
            <li>
                <a href="/tags/quadtree">quadtree (1)</a>
            </li>
        
            <li>
                <a href="/tags/texturepacker">texturepacker (1)</a>
            </li>
        
    </ul>
</div>

            </div>
        </main>
        <footer class="footer">
    <div class="footer-row">
        
            
            
                <a class="footer-item" href="https://www.chenqiaoqian.com/post/index.xml">
                    Feed of Post
                    <i class="icofont-rss"></i>
                </a>
            
        

        
            
            
        
    </div>

    
</footer>

    </body>
</html>
